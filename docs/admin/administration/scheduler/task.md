---
title: 'Задания планировщика'
---

Планировщик предназначен для автоматического выполнения определенных действий с заданной периодичностью. 
Если в настройках системы указан **Сервер**, то планировщика можно будет запустить только с данного сервера (рис.1).
![](../img/task1.png)  
Рис. 1 Указание сервера  

![](../img/task2.png)  
Рис. 2 Форма Задания планировщика  

Настройка планировщика осуществляется в меню **Администрирование - Планировщик - Задания** (рис. 2). 
Из данной формы можно осуществлять запуск планировщика по кнопке **Запустить планировщик**, либо остановку – **Остановить планировщик** (рис. 2(5)). 
На форме определяется перечень заданий к выполнению (рис. 2(3)) и подробности настройки и выполнения каждого задания (рис. 2(4)).


## Список заданий

Для формирования списка задания используются кнопки **Добавить, Удалить** (рис. 3(1,2)). 
Планировщик будет выполнять только активные задания – отметка **Активно** (рис. 3(5)). Для каждого задания задаются обязательные параметры (рис. 3(3)):

- **Дата/Время начала** – задание будет выполняться только после наступления указанной даты. 
Время в данном поле не привязано к Дате начала – она привязана к текущей дате и указывает на время первого (в рамках суток) запуска задания. 
От этого времени идет отсчет для повторного выполнения задания – периодичность задается в поле **Повторять каждые** (секунд). 
Если периодичность больше суток (86400 секунд), то датой начала отсчета является дата запуск (перезапуска) сервера.
- **Повторять каждые** (секунд) – периодичность выполнения задания.
- **Отсчет времени** – указывается момент, с которого осуществлять отсчет времени для повторного выполнения задания: 
либо От окончания предыдущего, либо От запуска предыдущего.

Также могут быть заданы и необязательны параметры (рис. 3(4)):

- **Имя** - название задания
- **Время с/Время по** – временное ограничение на выполнение задания в рамках суток.
- **Выполнять при старте** – задание выполняется только при запуске (перезапуске) сервера.

- Для каждого задания доступны кнопки (рис. 3(2)):

- **Выполнить задание** - ручной способ выполнить задание. Задание запускается сразу по нажатию кнопки. 
Если при нажатии кнопки задание еще не было завершено, то оно будет запущено дважды.
- **Перезапустить задание** - ручной способ выполнить задание. Задание запускается сразу по нажатию кнопки. 
Если, при нажатии кнопки, задание еще не было завершено, то оно будет остановлено и запущено вновь.
- **Удалить** - удалить задание.

![](../img/task3.png)  
Рис. 3 Список заданий планировщика  


## **Вкладка Свойства**

На вкладке **Свойства** перечислены **Действия**, входящие в выбранное задание. 
Последовательность выполнения действий определяется значениями в поле **Порядок** - от меньшего к большему. 
Выполняются действия только с отметкой **Активно**. Отметка **Игнорировать** ошибки позволяет начать действие несмотря на ошибку, 
возникшую в предыдущем действии, в противном случае – текущее действие не запустится. 
В качестве действия могут быть либо встроенные команды – список команд появляется по клику в поле **Действие**, 
либо созданные пользователем скрипты – в поле **Скрипт**. 
Для некоторых встроенных действий необходимы входные параметры (как правило, числовые), они вносятся в поле **Параметр действия**. 
В поле **Выполнять не дольше (секунд)** указывается максимально допустимая продолжительность для выполнения данного действия. 
Если действие не закончено в указанный срок, система расценивает это как ошибку.

![](../img/task4.png)  
Рис. 4 Свойства задания  


## **Вкладка Лог**

На вкладке **Лог** можно проследить результаты выполнения действий: когда оно начато и когда закончено. 
Если при выполнении действия возникла ошибка, не позволяющая его завершить, то в логе это отмечено в поле Ошибка. 
Некоторые действия сопровождаются информационными сообщениями – отметка в поле **Сообщения**. 
Если в логе, в поле **Ошибка в сообщениях** есть отметка, это означает, что при выполнении были обнаружены несоответствия некоторым ограничениям, 
используемым в программе. Все ошибки и сообщения сопровождаются пояснениями в секции **Сообщения клиента**.

![](../img/task5.png)  
Рис. 5 Лог планировщика  


## **Вкладка Фильтр по дням**

Если задание выполняется раз в несколько дней, здесь указывают либо дни недели, либо числа месяца, в которые будет запущено задание. 
Если указаны и дни недели, и числа месяца, то задание будет выполняться только в те числа месяца, которые выпадают на указанные дни недели.

![](../img/task6.png)  
Рис. 6 Установка фильтра по дням  


## **Вкладка Настройки планировщика**

На вкладке указывается максимальное количество потоков (заданий), которое может выполняться одновременно. 
Если количество потоков не указано, то, по умолчанию, одновременно может выполняться до 5 заданий.

![](../img/task7.png)  
Рис. 7 Настройка количества потоков  


